
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Heeley Bot | Project Overview - JustHack</title>
  <meta name="author" content="Cosmin Haims">

  
  <meta name="description" content="Summary: For my final project in my Digital Electronics class taught by Michael Shiloh, I decided to design and create my first robot. We were asked &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://jsthack.github.io/blog/2013/12/28/heeley-bot-project-overview">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="JustHack" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts 
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

<!--My Own Fonts (Google Web Fonts)-->
<link href='http://fonts.googleapis.com/css?family=Fredoka+One' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Inconsolata:400,700' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Asap:700' rel='stylesheet' type='text/css'>

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">JustHack</a></h1>
  
    <h2>Design, Hacking, Tech & More</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:jsthack.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Heeley Bot | Project Overview</h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-12-28T07:27:20-08:00" pubdate data-updated="true">Dec 28<span>th</span>, 2013</time>
        
      </p>
    
  </header>


<div class="entry-content"><h2>Summary:</h2>

<p>For my final project in my Digital Electronics class taught by Michael Shiloh, I decided to design and create my first robot. We were asked to create some sort of embedded Arduino project. Since i got into physical computing I always wanted to create a robot, specifically an autonomous &ldquo;rover&rdquo;.</p>

<p><img class="[sublime]" src="/images/hb.png" title="[100%] [100%] [title text [alt text]]" ></p>

<h2>Part 1 | Prep</h2>

<p>Going into this project the first thing I had to do was figure out what type of robot I wanted to make, and what were the base functions I wanted to program it to do. I decided on a simple 4WD &ldquo;rover&rdquo;,  using an Ultrasonic PING sensor to achieve obstacle avoidance. I figured out I wanted to attach the PING sensor to a servo so the robot could scan when an obstacle is reached.</p>

<h2>Part 2 | Materials &amp; Parts</h2>

<p>The next step was to figure out all the main components and parts I needed for this project, my &ldquo;BOM&rdquo; (Bill of Materials).</p>

<ol>
<li>Arduino Uno x 1</li>
<li>Adafruit Motor Shield x 1</li>
<li>Parallax Ping Sensor x 1</li>
<li>Standard Servo x 1</li>
<li>Geared DC Motors x 4</li>
<li>Rubber Wheels x 4</li>
<li>Robot Chassis x 1</li>
<li>5 AA Battery Pack  (with batteries) x 1</li>
<li>9v Battery x 2</li>
<li>Various Types of Jumper Wire (stranded and solid core)</li>
<li>Various Metal Hardware (screws, nuts, washers)</li>
<li>Toggle Switches x 2</li>
<li>Shrink Wrap Tubing</li>
<li>Zip Ties</li>
</ol>


<h3>Here is a breif list of the tools I used on this project</h3>

<ol>
<li>Soldering Station</li>
<li>Wire Strippers</li>
<li>Wire Cutters</li>
<li>Screw Drivers</li>
<li>Multimeter</li>
<li>Drill</li>
<li>Solder</li>
<li>Electrical Tape</li>
</ol>


<p><img class="[sublime]" src="/images/hb1.png" title="[100%] [100%] [title text [alt text]]" ></p>

<h3>Part 3 | Design</h3>

<p>After I figured out roughly what parts I was going to need, I started doing research on different hardware variations. I looked around a saw what other people had done in similar projects. The two main things I was thinking about during this stage was, I wanted a design that could be added to and changed, and I wanted my design to be easy to program when the time came. My feeling was simple is better. Below are two different views of the same schematic out of Fritzing. There are a few differences in my actual hardware, this is because Fritzing didn&rsquo;t have a couple parts I used.</p>

<p><img class="[sublime]" src="/images/hb_schematic.png" title="[100%] [100%] [title text [alt text]]" >
<img class="[sublime]" src="/images/hb_diagram.png" title="[100%] [100%] [title text [alt text]]" ></p>

<p>My hardware config is all based upon the Arduino Uno, but it can be any Arduino or Arduino compatible board. Though if you want to use the Adafruit Motor Shield, you need to use a board that is compatible with the standard Arduino shield footprint. Using the Adafruit Motor Shield made a few things very easy. The Motor Shield has special pinouts for two servos, and it&rsquo;s analog pins are laid out right next to power and ground pins which is perfect for sensor inputs.</p>

<h3>Part 4 | The Build</h3>

<p>Once I had all my parts and components, and since I already had my schematic, putting it together went very smoothly. I ended up going with a DF Robot chassis, and then bought four dc geared motors which would fit inside the chassis. The chassis I bought already had some pre drilled holes for certain boards DF Robot makes, but I drilled my own holes for mounting of my hardware.</p>

<p><img class="[sublime]" src="/images/hb3.png" title="[100%] [100%] [title text [alt text]]" >
<img class="[sublime]" src="/images/hb4.png" title="[100%] [100%] [title text [alt text]]" >
<img class="[sublime]" src="/images/hb5.png" title="[100%] [100%] [title text [alt text]]" >
<img class="[sublime]" src="/images/hb6.png" title="[100%] [100%] [title text [alt text]]" ></p>

<p>An important detail in my design was to have separate power for my logic and my motors. I used the AA battery pack to power my geared motors, and I mounted a 9V battery under the chassis for my logic (Arduino). As you can see in the image above, I have two separate switches mounted in the back of my bot. I want to also note how important organization is, not just for this project but any project. I labeled each wire coming out of my motors, and labeled any important wires I needed to keep track of. I also used zip ties to keep everything tidy and neat. This just helps me it look good, and also when you need to debug something, or upgrade something it easy to know where everything is.</p>

<p><img class="[sublime]" src="/images/hb7.png" title="[100%] [100%] [title text [alt text]]" >
<img class="[sublime]" src="/images/hb8.png" title="[100%] [100%] [title text [alt text]]" ></p>

<p>The whole navigation system for this bot relies on the PING sensor and the servo it&rsquo;s mounted on. My first version for this, I simply hacked together a mount for the sensor with cardboard and hot glue which just screwed into the servo. This actually worked just find, and it led me to design a permanent and cool looking solution for the mount. I knew I wanted to 3D print one, and I found a few different designs on Thingiverse. None of the ones I found fit what I needed, so I forked a design i found and hacked it to work what I needed. I then printed it at me school on the Eden printer, I&rsquo;m very thankful to have access to a $50,000 3D printer. Don&rsquo;t get me wrong, I love desktop FLA printers, but sometimes you just need super high resolution.</p>

<p><img class="[sublime]" src="/images/hb9.png" title="[100%] [100%] [title text [alt text]]" >
<img class="[sublime]" src="/images/hb10.png" title="[100%] [100%] [title text [alt text]]" >
<img class="[sublime]" src="/images/hb11.png" title="[100%] [100%] [title text [alt text]]" ></p>

<h3>Part 5 | Writing the Program</h3>

<p>The code I came up with works pretty well as is, but there are still some bugs I need to work out. In corners sometimes the bot doesn&rsquo;t know what to do, and will get stuck. Another problem is false reading, I need to figure out why it&rsquo;s happening, but sometimes the bot will just stop and turn around fro no reason. My code is based off of a couple peoples code I found on Github, I basically spliced it into what I needed for my hardware, and the behaviors I wanted.</p>

<h4>The Program</h4>

<figure class='code'><figcaption><span>Heeley Bot Navigation </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
<span class='line-number'>94</span>
<span class='line-number'>95</span>
<span class='line-number'>96</span>
<span class='line-number'>97</span>
<span class='line-number'>98</span>
<span class='line-number'>99</span>
<span class='line-number'>100</span>
<span class='line-number'>101</span>
<span class='line-number'>102</span>
<span class='line-number'>103</span>
<span class='line-number'>104</span>
<span class='line-number'>105</span>
<span class='line-number'>106</span>
<span class='line-number'>107</span>
<span class='line-number'>108</span>
<span class='line-number'>109</span>
<span class='line-number'>110</span>
<span class='line-number'>111</span>
<span class='line-number'>112</span>
<span class='line-number'>113</span>
<span class='line-number'>114</span>
<span class='line-number'>115</span>
<span class='line-number'>116</span>
<span class='line-number'>117</span>
<span class='line-number'>118</span>
<span class='line-number'>119</span>
<span class='line-number'>120</span>
<span class='line-number'>121</span>
<span class='line-number'>122</span>
<span class='line-number'>123</span>
<span class='line-number'>124</span>
<span class='line-number'>125</span>
<span class='line-number'>126</span>
<span class='line-number'>127</span>
<span class='line-number'>128</span>
<span class='line-number'>129</span>
<span class='line-number'>130</span>
<span class='line-number'>131</span>
<span class='line-number'>132</span>
<span class='line-number'>133</span>
<span class='line-number'>134</span>
<span class='line-number'>135</span>
<span class='line-number'>136</span>
<span class='line-number'>137</span>
<span class='line-number'>138</span>
<span class='line-number'>139</span>
<span class='line-number'>140</span>
<span class='line-number'>141</span>
<span class='line-number'>142</span>
<span class='line-number'>143</span>
<span class='line-number'>144</span>
<span class='line-number'>145</span>
<span class='line-number'>146</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="c1">// HeeleyBot_Navigation.ino</span>
</span><span class='line'>
</span><span class='line'><span class="cp">#include &lt;AFMotor.h&gt; </span><span class="c1">// Enables the Motor library</span>
</span><span class='line'><span class="cp">#include &lt;Servo.h&gt; </span><span class="c1">// Enables the Servo library</span>
</span><span class='line'>
</span><span class='line'><span class="n">Servo</span> <span class="n">PingServo</span><span class="p">;</span>
</span><span class='line'><span class="n">AF_DCMotor</span> <span class="nf">motor1</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// Motor 1 is connected to the port 1 on the motor shield</span>
</span><span class='line'><span class="n">AF_DCMotor</span> <span class="nf">motor2</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="c1">// Motor 2 is connected to the port 2 on the motor shield</span>
</span><span class='line'><span class="kt">int</span> <span class="n">minSafeDist</span> <span class="o">=</span> <span class="mi">11</span> <span class="p">;</span> <span class="c1">// Minimum distance for ping sensor to know when to turn</span>
</span><span class='line'><span class="kt">int</span> <span class="n">pingPin</span> <span class="o">=</span> <span class="n">A0</span><span class="p">;</span> <span class="c1">// Ping sensor is connected to port A0</span>
</span><span class='line'><span class="kt">int</span> <span class="n">centerDist</span><span class="p">,</span> <span class="n">leftDist</span><span class="p">,</span> <span class="n">rightDist</span><span class="p">,</span> <span class="n">backDist</span><span class="p">;</span> <span class="c1">// Define variables center, left, right and back distance</span>
</span><span class='line'><span class="kt">long</span> <span class="n">duration</span><span class="p">,</span> <span class="n">inches</span><span class="p">,</span> <span class="n">cm</span><span class="p">;</span> <span class="c1">// Define variables for Ping sensor </span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'><span class="n">PingServo</span><span class="p">.</span><span class="n">attach</span><span class="p">(</span><span class="mi">10</span><span class="p">);</span> <span class="c1">// Servo is attached to pin 10 in the motor shield</span>
</span><span class='line'><span class="n">PingServo</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mi">90</span><span class="p">);</span> <span class="c1">// Center the Ping sensor (puts it at 90 degrees)</span>
</span><span class='line'><span class="n">motor1</span><span class="p">.</span><span class="n">setSpeed</span><span class="p">(</span><span class="mi">240</span><span class="p">);</span> <span class="c1">// Sets the speed of the first motor (At 0, the motors are turned off. 255 is the fastest setting that you are able to use, I used 215 to not push the motors too hard.)</span>
</span><span class='line'><span class="n">motor2</span><span class="p">.</span><span class="n">setSpeed</span><span class="p">(</span><span class="mi">240</span><span class="p">);</span> <span class="c1">// Sets the speed of the second motor (At 0, the motors are turned off. 255 is the fastest setting that you are able to use, I used 215 to not push the motors too hard.)</span>
</span><span class='line'>
</span><span class='line'><span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span> <span class="c1">// Enables Serial monitor for debugging purposes</span>
</span><span class='line'><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Serial test!&quot;</span><span class="p">);</span> <span class="c1">// Test the Serial communication</span>
</span><span class='line'>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">AllStop</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'><span class="n">motor1</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">RELEASE</span><span class="p">);</span> <span class="c1">// Turns off motor 1</span>
</span><span class='line'><span class="n">motor2</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">RELEASE</span><span class="p">);</span> <span class="c1">// Turns off motor 2</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">AllForward</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// Makes the robot go forward</span>
</span><span class='line'><span class="n">motor1</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">FORWARD</span><span class="p">);</span> <span class="c1">// Motor 1 goes forward</span>
</span><span class='line'><span class="n">motor2</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">FORWARD</span><span class="p">);</span> <span class="c1">// Motor 2 goes forward</span>
</span><span class='line'><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Going forward&quot;</span><span class="p">);</span> <span class="c1">// Prints a line in the serial monitor</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">turnRight</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// Makes the robot go right</span>
</span><span class='line'><span class="n">motor2</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">BACKWARD</span><span class="p">);</span> <span class="c1">// Turns off motor 2</span>
</span><span class='line'><span class="n">motor1</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">FORWARD</span><span class="p">);</span> <span class="c1">// Motor 1 goes forward</span>
</span><span class='line'><span class="n">delay</span><span class="p">(</span><span class="mi">1600</span><span class="p">);</span> <span class="c1">// Time required to turn right (1.6 seconds)</span>
</span><span class='line'><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Motors going Right&quot;</span><span class="p">);</span> <span class="c1">// Prints a line in the serial monitor</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">GoBack</span><span class="p">(){</span> <span class="c1">// Makes the robot go back</span>
</span><span class='line'><span class="n">motor2</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">BACKWARD</span><span class="p">);</span> <span class="c1">// Motor 2 goes back</span>
</span><span class='line'><span class="n">motor1</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">BACKWARD</span><span class="p">);</span> <span class="c1">// Motor 1 goes back</span>
</span><span class='line'><span class="n">delay</span><span class="p">(</span><span class="mi">1600</span><span class="p">);</span> <span class="c1">// Time Required to go back (1.6 seconds)</span>
</span><span class='line'><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Backward&quot;</span><span class="p">);</span> <span class="c1">// Prints a line in the serial monitor</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">turnLeft</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// Makes the robot go Left</span>
</span><span class='line'><span class="n">motor2</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">FORWARD</span><span class="p">);</span> <span class="c1">// Motor 2 goes forward</span>
</span><span class='line'><span class="n">motor1</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">BACKWARD</span><span class="p">);</span> <span class="c1">// turns off motor 1</span>
</span><span class='line'><span class="n">delay</span><span class="p">(</span><span class="mi">1600</span><span class="p">);</span> <span class="c1">//Time Required to turn left (1.6)Seconds</span>
</span><span class='line'><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Motors going Left&quot;</span><span class="p">);</span><span class="c1">// Prints a line in the serial monitor</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c1">// Starts the loop to decide what to do</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">loop</span><span class="p">()</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'><span class="n">LookAhead</span><span class="p">();</span>
</span><span class='line'><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="n">inches</span><span class="p">);</span>
</span><span class='line'><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="s">&quot; inches&quot;</span><span class="p">);</span> <span class="c1">// Prints a line in the serial monitor</span>
</span><span class='line'><span class="k">if</span><span class="p">(</span><span class="n">inches</span> <span class="o">&gt;=</span> <span class="n">minSafeDist</span><span class="p">)</span> <span class="cm">/* If the inches in front of an object is greater than or equal to the minimum safe distance (11 inches), react*/</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'><span class="n">AllForward</span><span class="p">();</span> <span class="c1">// All wheels forward</span>
</span><span class='line'><span class="n">delay</span><span class="p">(</span><span class="mi">110</span><span class="p">);</span> <span class="c1">// Wait 0.11 seconds</span>
</span><span class='line'><span class="p">}</span><span class="k">else</span> <span class="c1">// If not:</span>
</span><span class='line'>
</span><span class='line'><span class="p">{</span>
</span><span class='line'><span class="n">AllStop</span><span class="p">();</span> <span class="c1">// Stop all motors</span>
</span><span class='line'><span class="n">LookAround</span><span class="p">();</span> <span class="c1">// Check your surroundings for best route</span>
</span><span class='line'><span class="k">if</span><span class="p">(</span><span class="n">rightDist</span> <span class="o">&gt;</span> <span class="n">leftDist</span><span class="p">)</span> <span class="c1">// If the right distance is greater than the left distance , turn right</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'><span class="n">turnRight</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span><span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">leftDist</span> <span class="o">&gt;</span> <span class="n">rightDist</span><span class="p">)</span> <span class="c1">// If the left distance is greater than the right distance , turn left</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'><span class="n">turnLeft</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span><span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">leftDist</span><span class="o">&amp;&amp;</span><span class="n">rightDist</span><span class="o">&lt;</span><span class="n">minSafeDist</span><span class="p">)</span> <span class="c1">// If the left and right distance is smaller than the min safe distance (11 inch) go back</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'><span class="n">GoBack</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">unsigned</span> <span class="kt">long</span> <span class="nf">ping</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'><span class="n">pinMode</span><span class="p">(</span><span class="n">pingPin</span><span class="p">,</span> <span class="n">OUTPUT</span><span class="p">);</span> <span class="c1">// Make the Pingpin to output</span>
</span><span class='line'><span class="n">digitalWrite</span><span class="p">(</span><span class="n">pingPin</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span> <span class="c1">//Send a low pulse</span>
</span><span class='line'><span class="n">delayMicroseconds</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span> <span class="c1">// wait for two microseconds</span>
</span><span class='line'><span class="n">digitalWrite</span><span class="p">(</span><span class="n">pingPin</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span> <span class="c1">// Send a high pulse</span>
</span><span class='line'><span class="n">delayMicroseconds</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span> <span class="c1">// wait for 5 micro seconds</span>
</span><span class='line'><span class="n">digitalWrite</span><span class="p">(</span><span class="n">pingPin</span><span class="p">,</span> <span class="n">LOW</span><span class="p">);</span> <span class="c1">// send a low pulse</span>
</span><span class='line'><span class="n">pinMode</span><span class="p">(</span><span class="n">pingPin</span><span class="p">,</span><span class="n">INPUT</span><span class="p">);</span> <span class="c1">// switch the Pingpin to input</span>
</span><span class='line'><span class="n">duration</span> <span class="o">=</span> <span class="n">pulseIn</span><span class="p">(</span><span class="n">pingPin</span><span class="p">,</span> <span class="n">HIGH</span><span class="p">);</span> <span class="c1">//listen for echo</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="cm">/*Convert micro seconds to Inches</span>
</span><span class='line'><span class="cm">-------------------------------------*/</span>
</span><span class='line'>
</span><span class='line'><span class="n">inches</span> <span class="o">=</span> <span class="n">microsecondsToInches</span><span class="p">(</span><span class="n">duration</span><span class="p">);</span>
</span><span class='line'><span class="n">cm</span> <span class="o">=</span> <span class="n">microsecondsToCentimeters</span><span class="p">(</span><span class="n">duration</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">long</span> <span class="nf">microsecondsToInches</span><span class="p">(</span><span class="kt">long</span> <span class="n">microseconds</span><span class="p">)</span> <span class="c1">// converts time to a distance</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'><span class="k">return</span> <span class="n">microseconds</span> <span class="o">/</span> <span class="mi">74</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="kt">long</span> <span class="nf">microsecondsToCentimeters</span><span class="p">(</span><span class="kt">long</span> <span class="n">microseconds</span><span class="p">)</span> <span class="c1">// converts time to a distance</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'><span class="k">return</span> <span class="n">microseconds</span> <span class="o">/</span> <span class="mi">29</span> <span class="o">/</span> <span class="mi">2</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">LookAhead</span><span class="p">()</span> <span class="p">{</span>
</span><span class='line'><span class="n">PingServo</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mi">90</span><span class="p">);</span><span class="c1">// angle to look forward</span>
</span><span class='line'><span class="n">delay</span><span class="p">(</span><span class="mi">175</span><span class="p">);</span> <span class="c1">// wait 0.175 seconds</span>
</span><span class='line'><span class="n">ping</span><span class="p">();</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="kt">void</span> <span class="nf">LookAround</span><span class="p">(){</span>
</span><span class='line'><span class="n">PingServo</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mi">180</span><span class="p">);</span> <span class="c1">// 180° angle</span>
</span><span class='line'><span class="n">delay</span><span class="p">(</span><span class="mi">320</span><span class="p">);</span> <span class="c1">// wait 0.32 seconds</span>
</span><span class='line'><span class="n">ping</span><span class="p">();</span>
</span><span class='line'><span class="n">rightDist</span> <span class="o">=</span> <span class="n">inches</span><span class="p">;</span> <span class="c1">//get the right distance</span>
</span><span class='line'><span class="n">PingServo</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// look to the other side</span>
</span><span class='line'><span class="n">delay</span><span class="p">(</span><span class="mi">620</span><span class="p">);</span> <span class="c1">// wait 0.62 seconds</span>
</span><span class='line'><span class="n">ping</span><span class="p">();</span>
</span><span class='line'><span class="n">leftDist</span> <span class="o">=</span> <span class="n">inches</span><span class="p">;</span> <span class="c1">// get the left distance</span>
</span><span class='line'><span class="n">PingServo</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="mi">90</span><span class="p">);</span> <span class="c1">// 90° angle</span>
</span><span class='line'><span class="n">delay</span><span class="p">(</span><span class="mi">275</span><span class="p">);</span> <span class="c1">// wait 0.275 seconds</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c1">// Prints a line in the serial monitor</span>
</span><span class='line'>
</span><span class='line'><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;RightDist: &quot;</span><span class="p">);</span>
</span><span class='line'><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">rightDist</span><span class="p">);</span>
</span><span class='line'><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;LeftDist: &quot;</span><span class="p">);</span>
</span><span class='line'><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">leftDist</span><span class="p">);</span>
</span><span class='line'><span class="n">Serial</span><span class="p">.</span><span class="n">print</span><span class="p">(</span><span class="s">&quot;CenterDist: &quot;</span><span class="p">);</span>
</span><span class='line'><span class="n">Serial</span><span class="p">.</span><span class="n">println</span><span class="p">(</span><span class="n">centerDist</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Final Thoughts</h3>

<p>The last part of my bot I still haven&rsquo;t finished. I&rsquo;m still in the process of developing a beacon finding system, using IR beacons. The picture above is an example of the transceiver/receiver that is mounted on my robot. The basic concept is I would have a pair of transceiver/receiver exactly the same, one mounted on my bot and the other somewhere on the ground. Each module has IR receivers and emitters, and basically gives an analog reading for direction based of which receiver is being hit the most. It&rsquo;s a simple concept, I just need to figure out how to pair that logic with my current navigation logic I already have. No matter what this has been a great learning experience for me, and I&rsquo;m already thinking about what type of robot I can build next.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Cosmin Haims</span></span>

      








  


<time datetime="2013-12-28T07:27:20-08:00" pubdate data-updated="true">Dec 28<span>th</span>, 2013</time>
      


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://jsthack.github.io/blog/2013/12/28/heeley-bot-project-overview/" data-via="http://twitter.com/cosmin_haims" data-counturl="http://jsthack.github.io/blog/2013/12/28/heeley-bot-project-overview/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2013/08/27/font-tool/" title="Previous Post: What's That Font?...">&laquo; What's That Font?...</a>
      
      
        <a class="basic-alignment right" href="/blog/2013/12/29/codepen-fun/" title="Next Post: Codepen Fun">Codepen Fun &raquo;</a>
      
    </p>
  </footer>
</article>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/12/29/codepen-fun/">CodePen, a Great Tool</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/29/codepen-fun/">Codepen Fun</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/12/28/heeley-bot-project-overview/">Heeley Bot | Project Overview</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/08/27/font-tool/">What's That Font?...</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/08/12/my-blog-workflow/">My Blog Workflow</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/http://github.com/jsthack">@http://github.com/jsthack</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'http://github.com/jsthack',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>





  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Cosmin Haims -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
